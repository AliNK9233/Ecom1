{% extends "base.html" %}

{% block title %}Initiate Payment{% endblock %}

{% block content %}
  <div class="container">
    <h1 class="mb-4">Initiate Payment</h1>
    
    <!-- Display order details or any additional information -->
    <p>Order ID: {{ order.id }}</p>
    <p>Total Amount: â‚¹{{ order.total_price }}</p>
    
    <!-- Razorpay Checkout script -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <!-- Create a button or trigger to initiate the payment -->
    <button id="pay-now-button" class="btn btn-primary btn-sm px-5">Pay Now</button>
    
    <script>
      var orderId = "{{ order.id }}"; // Replace with your actual order ID
      var amount = "{{ order.total_price|floatformat:"2" }}" * 100; // Amount in paise

      var options = {
        key: 'YOUR_RAZORPAY_API_KEY', // Replace with your actual Razorpay API key
        amount: amount,
        currency: 'INR',
        name: 'Pycom',
        description: 'Payment for Order #'+orderId,
        order_id: orderId,
        handler: function(response) {
          // Handle successful payment response
          console.log(response);
          // You may want to redirect the user to a success page or update the order status
        },
        prefill: {
          name: 'Customer Name',
          email: 'customer@example.com',
          contact: 'Customer Phone Number',
        },
        theme: {
          color: '#F37254', // Customize the color as needed
        },
      };

      var rzp1 = new Razorpay(options);

      document.getElementById('pay-now-button').onclick = function() {
        rzp1.open();
      };
    </script>
  </div>
{% endblock %}
